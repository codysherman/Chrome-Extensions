{"version":3,"sources":["webpack:///./src/assets/svgs/copy.svg","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/views/Streamer.vue?e1cc","webpack:///./src/utils/enums/Resolutions.js","webpack:///./src/utils/enums/Codecs.js","webpack:///./src/components/Streamer/StopSection.vue?f52d","webpack:///src/components/Streamer/StopSection.vue","webpack:///./src/components/Streamer/StopSection.vue?4ac6","webpack:///./src/components/Streamer/StopSection.vue","webpack:///./src/components/DesktopCapturer.vue?0574","webpack:///src/components/DesktopCapturer.vue","webpack:///./src/components/DesktopCapturer.vue?3fdb","webpack:///./src/components/DesktopCapturer.vue","webpack:///./src/components/StreamerConnection.vue?3f95","webpack:///src/components/StreamerConnection.vue","webpack:///./src/components/StreamerConnection.vue?043f","webpack:///./src/components/StreamerConnection.vue","webpack:///src/views/Streamer.vue","webpack:///./src/views/Streamer.vue?0983","webpack:///./src/views/Streamer.vue","webpack:///./src/assets/svgs/gear.svg","webpack:///./src/views/Streamer.vue?6105","webpack:///./src/components/Streamer/StopSection.vue?3733","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js"],"names":["module","exports","functional","_h","_vm","_c","_v","data","children","class","classNames","staticClass","style","staticStyle","attrs","rest","Object","assign","concat","$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","isRegExp","it","TypeError","render","$createElement","_self","ref","enableVideo","enableAudio","enableMic","resolution","on","onIsSharing","onGotStream","onSetDefaults","bandwidth","codecs","room_id","room_password","privacy","isP2POnly","onSessionId","onViewerCount","onIdTaken","live","isSharingOn","sessionId","_e","useridAlreadyTaken","_s","directives","name","rawName","value","expression","domProps","setRoomName","$event","composing","showAdvancedOptions","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","slice","$$selectedVal","prototype","filter","call","options","o","selected","map","val","_value","multiple","Resolutions","FitScreen","Fit4K","Fit2K","Fit1080p","Fit720p","Fit480p","Fit360p","Fit240p","Fit144p","_q","Codecs","vp9","vp8","h264","startStream","viewerCount","stream","muteMic","stopStream","staticRenderFns","getDimensionsForResolution","width","height","window","screen","copyUrl","toggleMicMute","showPreview","_m","components","CopySvg","Player","props","type","MediaStream","default","Number","copyNotification","methods","$emit","tempInput","setAttribute","document","body","appendChild","select","result","setTimeout","console","error","removeChild","component","Boolean","isSharing","watch","newValue","beforeDestroy","setDefaults","captureDesktop","getTracks","forEach","track","stop","e","dimensions","video","constraints","audio","autoGainControl","echoCancellation","noiseSuppression","startCapturing","gotStream","addEventListener","addStreamStopListener","streamEndedEvent","getAudioTracks","getVideoTracks","roomPassword","roomId","mounted","setOffline","setOnline","removeEventListener","connection","shareStreamUsingRTCMultiConnection","RTCMultiConnection","autoCreateMediaElement","socketURL","autoCloseEntireSession","publicRoomIdentifier","socketMessageEvent","password","enableLogs","session","oneway","candidates","stun","turn","iceTransportPolicy","iceProtocols","tcp","udp","optionalArgument","optional","mandatory","channel","sessionid","userid","autoReDialOnFailure","getExternalIceServers","extra","iceServers","IceServersHandler","processSdp","sdp","setBandwidth","CodecsHandler","min","max","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","onstream","onstreamended","event","mediaElement","pause","onUserIdAlreadyTaken","dontCaptureUserMedia","attachStreams","push","containsVideo","containsAudio","containsMic","text","clearInterval","looper","socketCustomEvent","alert","onSocketDisconnect","onSocketError","onmessage","newChatMessage","receivedChatMessage","checkmark_id","open","roomOpenCallback","onleave","participants","count","onPeerStateChanged","setViewerCount","receiverViewerCount","updateExtraData","closeSocket","replace","metaInfo","title","LogoSvg","VideoSvg","AudioSvg","VideoAndAudioSvg","XSvg","GearSvg","StopSection","DesktopCapturer","StreamerConnection","desktop_id","localStorage","getItem","streaming_method","computed","$refs","protectedRoutes","$nextTick","capturer","setItem","parseInt","id","takenID","enabled","wellKnownSymbol","MATCH","METHOD_NAME","regexp","error1","error2","$includes","addToUnscopables","el"],"mappings":"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","file":"js/streamer.8e1f16cf.js","sourcesContent":["\n      module.exports = {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"d\":\"M18 6V0H0v18h6v6h18V6h-6zM6 16H2V2h14v4H6v10zm16 6H8V8h14v14z\"}})])\n          )\n        }\n      }\n    ","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('DesktopCapturer',{ref:\"capturer\",attrs:{\"enableVideo\":_vm.enableVideo,\"enableAudio\":_vm.enableAudio,\"enableMic\":_vm.enableMic,\"resolution\":_vm.resolution},on:{\"is-sharing\":_vm.onIsSharing,\"got-stream\":_vm.onGotStream,\"set-defaults\":_vm.onSetDefaults}}),_c('StreamerConnection',{ref:\"connection\",attrs:{\"bandwidth\":_vm.bandwidth,\"codecs\":_vm.codecs,\"roomId\":_vm.room_id,\"roomPassword\":_vm.room_password,\"privacy\":_vm.privacy,\"enableVideo\":_vm.enableVideo,\"enableAudio\":_vm.enableAudio,\"isP2POnly\":_vm.isP2POnly},on:{\"session-id\":_vm.onSessionId,\"viewer-count\":_vm.onViewerCount,\"id-taken\":_vm.onIdTaken}}),_c('div',{staticClass:\"frow row-center width-100\"},[_c('div',{staticClass:\"col-md-1-2\"},[_c('router-link',{staticClass:\"logo\",attrs:{\"to\":\"/\"}},[_c('LogoSvg')],1),_c('div',{staticClass:\"live-indicator\",class:{ live: _vm.isSharingOn && _vm.sessionId }},[_vm._v(\"LIVE\")])],1),_c('div',{staticClass:\"col-md-1-2\"},[(!_vm.isSharingOn || !_vm.sessionId)?_c('div',[(_vm.room_id && _vm.room_id === _vm.useridAlreadyTaken)?_c('div',{staticClass:\"id-taken text-center\"},[_vm._v(\"Room name already taken: \"),_c('strong',[_vm._v(_vm._s(_vm.useridAlreadyTaken))])]):_vm._e(),_c('label',{staticClass:\"room-id-label row-start\"},[_c('span',{staticClass:\"shrink-0\"},[_vm._v(\"2n.fm/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.room_id),expression:\"room_id\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Random\"},domProps:{\"value\":(_vm.room_id)},on:{\"change\":_vm.setRoomName,\"blur\":_vm.setRoomName,\"input\":function($event){if($event.target.composing){ return; }_vm.room_id=$event.target.value}}})]),_c('section',{staticClass:\"options\"},[_c('div',{staticClass:\"section-label\"},[_vm._v(\"Options\")]),_c('div',{staticClass:\"section-label right-item\",on:{\"click\":function($event){_vm.showAdvancedOptions = !_vm.showAdvancedOptions}}},[(!_vm.showAdvancedOptions)?_c('div',{staticClass:\"gear\"},[_c('div',{staticClass:\"frow nowrap\"},[_c('GearSvg'),_c('sup',[_vm._v(\"!\")])],1)]):_vm._e(),(_vm.showAdvancedOptions)?_c('div',{staticClass:\"x-icon\"},[_c('div',{staticClass:\"frow centered\"},[_c('XSvg')],1)]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAdvancedOptions),expression:\"showAdvancedOptions\"}],staticClass:\"advanced\"},[_c('div',{staticClass:\"frow centered\"},[_c('label',{staticClass:\"row-center mb-0\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isP2POnly),expression:\"isP2POnly\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isP2POnly)?_vm._i(_vm.isP2POnly,null)>-1:(_vm.isP2POnly)},on:{\"change\":function($event){var $$a=_vm.isP2POnly,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isP2POnly=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isP2POnly=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isP2POnly=$$c}}}}),_vm._v(\"Force peer-to-peer (P2P) connections\")])])]),_c('div',{staticClass:\"frow gutters\"},[_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"settings-item\"},[_c('label',[_vm._v(\"Resolution\"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.resolution),expression:\"resolution\"}],attrs:{\"id\":\"resolutions\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.resolution=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{domProps:{\"value\":_vm.Resolutions.FitScreen}},[_vm._v(\"Fit Screen\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit4K}},[_vm._v(\"4K (2160p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit2K}},[_vm._v(\"2K (1440p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit1080p}},[_vm._v(\"Full-HD (1080p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit720p}},[_vm._v(\"HD (720p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit480p}},[_vm._v(\"SD (480p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit360p}},[_vm._v(\"LD (360p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit240p}},[_vm._v(\"N64 (240p)\")]),_c('option',{domProps:{\"value\":_vm.Resolutions.Fit144p}},[_vm._v(\"2LO (144p)\")])])])])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('label',{staticClass:\"row-start\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.privacy),expression:\"privacy\"}],attrs:{\"type\":\"radio\",\"value\":\"private\"},domProps:{\"checked\":_vm._q(_vm.privacy,\"private\")},on:{\"change\":function($event){_vm.privacy=\"private\"}}}),_vm._v(\"Private Room\")]),_c('label',{staticClass:\"row-start mb-0\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.privacy),expression:\"privacy\"}],attrs:{\"type\":\"radio\",\"value\":\"public\"},domProps:{\"checked\":_vm._q(_vm.privacy,\"public\")},on:{\"change\":function($event){_vm.privacy=\"public\"}}}),_vm._v(\"Public Room\")])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('label',{staticClass:\"row-start\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableMic),expression:\"enableMic\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableMic)?_vm._i(_vm.enableMic,null)>-1:(_vm.enableMic)},on:{\"change\":function($event){var $$a=_vm.enableMic,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableMic=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableMic=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableMic=$$c}}}}),_vm._v(\"Enable Microphone\")])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('label',{staticClass:\"row-start mb-10\"},[_vm._v(\"Codec\"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.codecs),expression:\"codecs\"}],staticClass:\"ml-5\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.codecs=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{domProps:{\"value\":_vm.Codecs.vp9}},[_vm._v(\"VP9 (Quality)\")]),_c('option',{domProps:{\"value\":_vm.Codecs.vp8}},[_vm._v(\"VP8 (Performance)\")]),_c('option',{attrs:{\"disabled\":!_vm.isP2POnly},domProps:{\"value\":_vm.Codecs.h264}},[_vm._v(\"H.264 (P2P Only)\")])])]),_c('div',{staticClass:\"label text-center m-0\"},[(_vm.codecs === _vm.Codecs.vp9)?_c('span',[_vm._v(\"Best quality, least data\")]):_vm._e(),(_vm.codecs === _vm.Codecs.vp8)?_c('span',[_vm._v(\"Good quality, more FPS\")]):_vm._e(),(_vm.codecs === _vm.Codecs.h264)?_c('span',[_vm._v(\"Easy on old devices, bandwidth heavy\")]):_vm._e()])])])]),_c('section',[_c('div',{staticClass:\"section-label\"},[_vm._v(\"Start\")]),_c('div',{staticClass:\"frow gutters\"},[_c('div',{staticClass:\"col-xs-1-3\"},[_c('div',{staticClass:\"stream-button\",on:{\"click\":function($event){return _vm.startStream(true, false)}}},[_c('div',{staticClass:\"frow column-center\"},[_c('VideoSvg'),_vm._v(\"Video Only\"),_c('div',{staticClass:\"and-mic\",class:{'opacity-100': _vm.enableMic }},[_vm._v(\"& Mic\")])],1)])]),_c('div',{staticClass:\"col-xs-1-3\"},[_c('div',{staticClass:\"stream-button\",on:{\"click\":function($event){return _vm.startStream(true, true)}}},[_c('div',{staticClass:\"frow column-center\"},[_c('VideoAndAudioSvg'),_vm._v(\"Video + Audio\"),_c('div',{staticClass:\"and-mic\",class:{'opacity-100': _vm.enableMic }},[_vm._v(\"& Mic\")])],1)])]),_c('div',{staticClass:\"col-xs-1-3\"},[_c('div',{staticClass:\"stream-button\",on:{\"click\":function($event){return _vm.startStream(false, true)}}},[_c('div',{staticClass:\"frow column-center\"},[_c('AudioSvg'),_vm._v(\"Audio Only\"),_c('div',{staticClass:\"and-mic\",class:{'opacity-100': _vm.enableMic }},[_vm._v(\"& Mic\")])],1)])])])])]):_vm._e(),(_vm.isSharingOn && _vm.sessionId)?_c('StopSection',{attrs:{\"sessionId\":_vm.sessionId,\"viewerCount\":_vm.viewerCount,\"stream\":_vm.stream,\"privacy\":_vm.privacy},on:{\"mute-mic-toggle\":_vm.muteMic,\"stop-stream\":_vm.stopStream}}):_vm._e()],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const Resolutions = {\n  FitScreen: 'FitScreen',\n  Fit4K: 'Fit4K',\n  Fit2K: 'Fit2K',\n  Fit1080p: 'Fit1080p',\n  Fit720p: 'Fit720p',\n  Fit480p: 'Fit480p',\n  Fit360p: 'Fit360p',\n  Fit240p: 'Fit240p',\n  Fit144p: 'Fit144p',\n};\n\n/**\n * @return dimensions { width: number, height: number }\n */\nexport const getDimensionsForResolution = (resolution) => {\n  switch (resolution) {\n    case Resolutions.Fit4K:\n      return { width: 3840, height: 2160 };\n    case Resolutions.Fit2K:\n      return { width: 2560, height: 1440 };\n    case Resolutions.Fit1080p:\n      return { width: 1920, height: 1080 };\n    case Resolutions.Fit720p:\n      return { width: 1280, height: 720 };\n    case Resolutions.Fit480p:\n      return { width: 720, height: 480 };\n    case Resolutions.Fit360p:\n      return { width: 640, height: 360 };\n    case Resolutions.Fit240p:\n      return { width: 426, height: 240 };\n    case Resolutions.Fit144p:\n      return { width: 256, height: 144 };\n    case Resolutions.FitScreen:\n    default:\n      return (window || {}).screen || getDimensionsForResolution(Resolutions.Fit720p);\n  }\n};","export const Codecs = {\n  vp8: 'vp8',\n  vp9: 'vp9',\n  h264: 'h264',\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"frow row-center\"},[_c('router-link',{staticClass:\"public-link\",attrs:{\"to\":_vm.sessionId,\"target\":\"_blank\"}},[_vm._v(_vm._s((\"2n.fm/\" + _vm.sessionId)))]),_c('div',{staticClass:\"copy-button\",on:{\"click\":function($event){return _vm.copyUrl()}}},[_c('CopySvg')],1)],1),(_vm.copyNotification)?_c('div',{staticClass:\"copy-notification animate-fade-in\"},[_vm._v(\"Copied\")]):_vm._e(),_c('div',{staticClass:\"viewer-count mt-20\"},[_vm._v(_vm._s(_vm.viewerCount)+\" \"+_vm._s(_vm.viewerCount === 1 ? 'Viewer' : 'Viewers'))]),_c('div',{staticClass:\"frow mt-5 mb-30\"},[_c('div',{staticClass:\"public-indicator\",class:{'public': _vm.privacy === 'public'}},[_vm._v(_vm._s(_vm.privacy))])]),(_vm.showPreview)?_c('Player',{staticClass:\"mb-20\",attrs:{\"stream\":_vm.stream,\"receiverViewerCount\":_vm.viewerCount,\"disableAutoplay\":true}}):_vm._e(),(_vm.stream.containsMic)?_c('label',{staticClass:\"row-start\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.muteMic),expression:\"muteMic\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.muteMic)?_vm._i(_vm.muteMic,null)>-1:(_vm.muteMic)},on:{\"change\":[function($event){var $$a=_vm.muteMic,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.muteMic=$$a.concat([$$v]))}else{$$i>-1&&(_vm.muteMic=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.muteMic=$$c}},_vm.toggleMicMute]}}),_vm._v(\"Mute Mic\")]):_vm._e(),_c('div',{staticClass:\"streamer-control-buttons\"},[_c('div',{staticClass:\"frow row-between\"},[_c('button',{staticClass:\"col-xs-2-5\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.stopStream}},[_vm._v(\"End Sharing\")]),_c('button',{staticClass:\"col-xs-2-5\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showPreview = !_vm.showPreview}}},[_vm._v(_vm._s(_vm.showPreview ? 'Hide Preview' : 'Show Preview'))])])]),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frow width-100 mt-20\"},[_c('a',{staticClass:\"text-underline\",attrs:{\"href\":\"https://caniuse.com/#search=getDisplayMedia\",\"rel\":\"noopener\",\"target\":\"_blank\"}},[_vm._v(\"OS and Browser Limitations\")])])}]\n\nexport { render, staticRenderFns }","<style scoped lang=\"sass\">\n.public-link\n  text-align: center\n  display: inline-block\n  font-size: 40px\n  color: $primary-color\n  margin: 0\n\n  // XS\n  @media (max-width: 767px)\n    font-size: 30px\n\n.copy-button\n  display: inline-block\n  margin-left: 14px\n  cursor: pointer\n\n  svg\n    width: 30px\n    fill: $primary-color\n\n.copy-notification\n  font-size: 20px\n  text-align: center\n\n.public-indicator\n  border-radius: $border-radius-small\n  padding: 3px 5px\n  background-color: $gray-light\n  text-transform: capitalize\n  color: $white\n\n  &.public\n    background-color: $blue\n\n.viewer-count\n  text-align: center\n  font-size: 20px\n  font-weight: $weight-bold\n\n.streamer-control-buttons\n  button\n    margin: 0 auto\n    font-size: 30px\n    padding: 15px\n    background: none\n    border: 3px solid $primary-color\n    color: $primary-color\n    border-radius: 10px\n</style>\n\n<template lang=\"pug\">\ndiv\n  .frow.row-center\n    router-link.public-link(:to=\"sessionId\" target=\"_blank\")\n      | {{ `2n.fm/${sessionId}` }}\n    .copy-button(@click=\"copyUrl()\")\n        CopySvg\n  .copy-notification.animate-fade-in(v-if=\"copyNotification\")\n    | Copied\n  .viewer-count.mt-20\n    | {{ viewerCount }} {{ viewerCount === 1 ? 'Viewer' : 'Viewers' }}\n  .frow.mt-5.mb-30\n    .public-indicator(:class=\"{'public': privacy === 'public'}\") {{privacy}}\n  Player.mb-20(\n    v-if=\"showPreview\"\n    :stream=\"stream\"\n    :receiverViewerCount=\"viewerCount\"\n    :disableAutoplay=\"true\"\n  )\n  label.row-start(v-if=\"stream.containsMic\")\n    input(type=\"checkbox\" v-model=\"muteMic\" v-on:change=\"toggleMicMute\")\n    | Mute Mic\n  .streamer-control-buttons\n    .frow.row-between\n      button.col-xs-2-5(type=\"button\" @click=\"stopStream\")\n        | End Sharing\n      button.col-xs-2-5(type=\"button\" @click=\"showPreview = !showPreview\")\n        | {{ showPreview ? 'Hide Preview' : 'Show Preview' }}\n  .frow.width-100.mt-20\n    a.text-underline(\n      href=\"https://caniuse.com/#search=getDisplayMedia\"\n      rel=\"noopener\"\n      target=\"_blank\"\n    )\n      | OS and Browser Limitations\n</template>\n\n<script>\nimport CopySvg from '@/assets/svgs/copy.svg';\n\nimport Player from '@/components/Player/Player.vue';\n\nexport default {\n  name: 'StopSection',\n  components: {\n    CopySvg,\n    Player,\n  },\n  props: {\n    stream: {\n      type: MediaStream,\n      default: null,\n    },\n    sessionId: {\n      type: String,\n      default: null,\n    },\n    viewerCount: {\n      type: Number,\n      default: 0,\n    },\n    privacy: {\n      type: String,\n      default: 'private',\n    },\n  },\n  data() {\n    return {\n      copyNotification: false,\n      showPreview: false,\n      muteMic: false,\n    };\n  },\n  methods: {\n    toggleMicMute() {\n      this.$emit('mute-mic-toggle', this.muteMic);\n    },\n    copyUrl() {\n      let tempInput = document.createElement('input');\n      tempInput.setAttribute('value', `https://2n.fm/${this.sessionId}`);\n      document.body.appendChild(tempInput);\n      tempInput.select();\n      let result = document.execCommand('copy');\n      if (result) {\n        this.copyNotification = true;\n        setTimeout(() => {\n          this.copyNotification = false;\n        }, 5000);\n      } else {\n        console.error('Copy failed');\n      }\n      document.body.removeChild(tempInput);\n    },\n    stopStream() {\n      this.$emit('stop-stream');\n    },\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StopSection.vue?vue&type=template&id=4f7b0df0&scoped=true&lang=pug&\"\nimport script from \"./StopSection.vue?vue&type=script&lang=js&\"\nexport * from \"./StopSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StopSection.vue?vue&type=style&index=0&id=4f7b0df0&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4f7b0df0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n</template>\n\n<script>\nimport { Resolutions, getDimensionsForResolution } from '@/utils/enums/Resolutions';\n\nexport default {\n  name: 'DesktopCapturer',\n  props: {\n    enableVideo: Boolean,\n    enableAudio: Boolean,\n    enableMic: Boolean,\n    resolution: {\n      type: String,\n      default: Resolutions.FitScreen,\n    },\n  },\n  data() {\n    return {\n      isSharing: false,\n      stream: null,\n    };\n  },\n  watch: {\n    isSharing(newValue) {\n      this.$emit('is-sharing', newValue);\n    },\n  },\n  beforeDestroy() {\n    this.stopStream();\n  },\n  methods: {\n    setDefaults() {\n      this.$emit('set-defaults');\n      this.isSharing = false;\n    },\n    startStream() {\n      this.setDefaults();\n      this.isSharing = true;\n      this.captureDesktop();\n    },\n    stopStream() {\n      this.isSharing = false;\n      this.stream.getTracks().forEach(function (track) {\n        try {\n          track.stop();\n        } catch (e) {\n          console.error(e);\n        }\n      });\n      this.stream = null;\n      // SM: post Vue migration, what previously ran in captureDesktop is instead in setDefaults\n      // this.captureDesktop();\n      this.setDefaults();\n    },\n    captureDesktop() {\n      // console.log(navigator.mediaDevices.getSupportedConstraints());\n      let dimensions = '';\n\n      if (!this.enableVideo) {\n        dimensions = getDimensionsForResolution('Fit144p');\n      } else {\n        dimensions = getDimensionsForResolution(this.resolution);\n      }\n\n      let constraints = {\n        video: {\n          // TODO: displaySurface support is waiting on browser support\n          // https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\n          // displaySurface: [\"application\", \"browser\", \"monitor\", \"window\"],\n          width: { ideal: dimensions.width },\n          height: { ideal: dimensions.height },\n        },\n      };\n\n      if (this.enableAudio) {\n        constraints.audio = {\n          autoGainControl: false,\n          echoCancellation: false,\n          noiseSuppression: false,\n        };\n      }\n\n      const startMicCapture = async () => {\n        let captureMicStream;\n        try {\n          captureMicStream = await navigator.mediaDevices.getUserMedia(\n            {\n              audio: true,\n              video: false,\n            },\n          );\n        } catch (err) {\n          console.error('Error getting microphone', err);\n          alert('Your browser denied microphone access');\n          // this.setDefaults();\n        }\n        return captureMicStream;\n      };\n\n      const startScreenCapture = async () => {\n        let captureStream;\n        try {\n          captureStream = await navigator.mediaDevices.getDisplayMedia(\n            constraints,\n          );\n        } catch (err) {\n          this.setDefaults();\n        }\n        return captureStream;\n      };\n\n      const startCapturing = async () => {\n        let micStream = null;\n        if (this.enableMic === true) {\n          micStream = await startMicCapture();\n        }\n        if (this.enableMic === true && !micStream) {\n          return;\n        }\n        this.stream = await startScreenCapture();\n        // console.log(stream.getTracks()[0].getCapabilities());\n        // console.log(stream.getTracks()[0].getSettings());\n        if (this.enableAudio && this.stream.getAudioTracks().length === 0) {\n          alert('Make sure to check the \"Share audio\" box in Google Chrome or Microsoft Edge');\n          this.stopStream();\n          return;\n        }\n        if (this.stream.getAudioTracks().length > 0) {\n          this.stream.containsAudio = true;\n        }\n        // Remove the video track from the source stream if audio only\n        if (\n          !this.enableVideo &&\n          this.stream.getVideoTracks().length > 0\n        ) {\n          this.stream.removeTrack(\n            this.stream.getVideoTracks()[0],\n          );\n        }\n        if (this.stream.getVideoTracks().length > 0) {\n          this.stream.containsVideo = true;\n        }\n        if (micStream) {\n          this.stream.addTrack(micStream.getAudioTracks()[0]);\n          this.stream.containsMic = true;\n        }\n        this.gotStream();\n      };\n      startCapturing();\n    },\n    gotStream() {\n      if (!this.stream) {\n        this.setDefaults();\n        return;\n      }\n\n      this.stream.addEventListener('inactive', () => {\n        this.setDefaults();\n      });\n\n      this.addStreamStopListener(() => {\n        this.setDefaults();\n      });\n\n      this.$emit('got-stream', this.stream);\n    },\n    addStreamStopListener(callback) {\n      var streamEndedEvent = 'ended';\n      if ('oninactive' in this.stream) {\n        streamEndedEvent = 'inactive';\n      }\n      this.stream.addEventListener(\n        streamEndedEvent,\n        function () {\n          callback();\n          callback = function () {};\n        },\n        false,\n      );\n      this.stream.getAudioTracks().forEach(function (track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function () {\n            callback();\n            callback = function () {};\n          },\n          false,\n        );\n      });\n      this.stream.getVideoTracks().forEach(function (track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function () {\n            callback();\n            callback = function () {};\n          },\n          false,\n        );\n      });\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DesktopCapturer.vue?vue&type=template&id=41f5125e&lang=pug&\"\nimport script from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\nexport * from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n</template>\n\n<script>\nimport { Codecs } from '@/utils/enums/Codecs';\nimport { CodecsHandler } from '../utils/background/helpers/CodecsHandler';\nimport { IceServersHandler } from '../utils/background/helpers/IceServersHandler';\n\nexport default {\n  name: 'StreamerConnection',\n  props: {\n    bandwidth: {\n      type: Number,\n      default: 8192,\n    },\n    codecs: {\n      type: String,\n      default: 'vp8',\n    },\n    roomPassword: {\n      type: String,\n      default: '',\n    },\n    roomId: {\n      type: String,\n      default: '',\n    },\n    privacy: {\n      type: String,\n      default: 'private',\n    },\n    enableVideo: {\n      type: Boolean,\n      default: false,\n    },\n    enableAudio: {\n      type: Boolean,\n      default: false,\n    },\n    isP2POnly: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return { connection: null };\n  },\n  mounted() {\n    window.addEventListener('offline', this.setOffline, false);\n    window.addEventListener('online', this.setOnline, false);\n  },\n  beforeDestroy() {\n    window.removeEventListener('offline', this.setOffline, false);\n    window.removeEventListener('online', this.setOnline, false);\n\n    this.connection = null;\n    delete this.connection;\n  },\n  methods: {\n    shareStreamUsingRTCMultiConnection(stream) {\n      // www.RTCMultiConnection.org/docs/\n      this.connection = new RTCMultiConnection();\n      this.connection.autoCreateMediaElement = false;\n\n      this.connection.socketURL = 'https://api.2n.fm:9001/';\n      this.connection.autoCloseEntireSession = true;\n      // this must match the viewer page\n      if (this.privacy === 'public') {\n        this.connection.publicRoomIdentifier = 'desktopCapture';\n      }\n\n      this.connection.socketMessageEvent = 'desktopCapture';\n\n      this.connection.password = null;\n      if (this.roomPassword && this.roomPassword.length) {\n        this.connection.password = this.roomPassword;\n      }\n\n      this.connection.enableLogs = false;\n      this.connection.session = {\n        audio: this.enableAudio,\n        video: this.enableVideo,\n        data: true,\n        oneway: true,\n      };\n\n      this.connection.candidates = {\n        stun: true,\n        turn: !this.isP2POnly,\n      };\n      this.connection.iceTransportPolicy = 'all';\n\n      this.connection.iceProtocols = {\n        tcp: true,\n        udp: true,\n      };\n\n      this.connection.optionalArgument = {\n        optional: [],\n        mandatory: {},\n      };\n\n      this.connection.channel = this.connection.sessionid = this.connection.userid;\n\n      if (this.roomId && this.roomId.length) {\n        this.connection.channel = this.connection.sessionid = this.connection.userid = this.roomId;\n      }\n\n      this.connection.autoReDialOnFailure = true;\n      this.connection.getExternalIceServers = false;\n\n      this.connection.extra.isP2POnly = this.isP2POnly;\n      this.connection.iceServers = IceServersHandler.getIceServers(!this.isP2POnly);\n\n      this.connection.processSdp = (sdp) => {\n        if (this.bandwidth) {\n          if (\n            this.bandwidth &&\n            !isNaN(this.bandwidth) &&\n            this.bandwidth != 'NaN' &&\n            typeof this.bandwidth == 'number'\n          ) {\n            sdp = setBandwidth(sdp, this.bandwidth);\n            sdp = CodecsHandler.setVideoBitrates(sdp, {\n              min: this.bandwidth,\n              max: this.bandwidth,\n            });\n          }\n        }\n\n        if (this.enableAudio && !this.enableVideo) {\n          sdp = CodecsHandler.preferCodec(sdp, Codecs.h264);\n        } else {\n          sdp = CodecsHandler.preferCodec(sdp, this.codecs);\n        }\n\n        return sdp;\n      };\n\n      // www.rtcmultiexternalThis.connection.org/docs/sdpConstraints/\n      this.connection.sdpConstraints.mandatory = {\n        OfferToReceiveAudio: false,\n        OfferToReceiveVideo: false,\n      };\n\n      this.connection.onstream = this.connection.onstreamended = (event) => {\n        try {\n          event.mediaElement.pause();\n          delete event.mediaElement;\n        } catch (e) {\n          console.error(e);\n        }\n      };\n\n      this.connection.onUserIdAlreadyTaken = (useridAlreadyTaken) => {\n        this.$emit('id-taken', useridAlreadyTaken);\n      };\n\n      // www.RTCMultiConnection.org/docs/dontCaptureUserMedia/\n      this.connection.dontCaptureUserMedia = true;\n\n      // www.RTCMultiConnection.org/docs/attachStreams/\n      this.connection.attachStreams.push(stream);\n\n      if (stream.containsVideo) {\n        this.connection.extra.containsVideo = stream.containsVideo;\n        // this.connection.updateExtraData();\n      }\n\n      if (stream.containsAudio) {\n        this.connection.extra.containsAudio = stream.containsAudio;\n        // this.connection.updateExtraData();\n      }\n\n      if (stream.containsMic) {\n        this.connection.extra.containsMic = stream.containsMic;\n        // this.connection.updateExtraData();\n      }\n\n      var text = '-';\n      const looper = setInterval(() => {\n        if (!this.connection) {\n          this.setViewerCount(0);\n          clearInterval(looper);\n          return;\n        }\n\n        if (this.connection.isInitiator) {\n          this.setViewerCount(0);\n          clearInterval(looper);\n          return;\n        }\n\n        text += ' -';\n        if (text.length > 6) {\n          text = '-';\n        }\n\n        this.setViewerCount(text);\n      }, 500);\n\n      // www.RTCMultiConnection.org/docs/open/\n      this.connection.socketCustomEvent = this.connection.sessionid;\n\n      const roomOpenCallback = (isRoomOpened, roomid, error) => {\n        if (error) {\n          alert(error);\n        }\n\n        // any key-values set here should be reset in setDefaults.js\n        this.$emit('session-id', this.connection.sessionid);\n\n        this.setViewerCount(0);\n\n        this.connection.socket.on(\n          this.connection.socketCustomEvent,\n          (message) => {\n            if (message.receivedYourScreen) {\n              this.setViewerCount(\n                this.connection.isInitiator\n                  ? this.connection.getAllParticipants().length\n                  : 0,\n              );\n            }\n          },\n        );\n      };\n\n      this.connection.onSocketDisconnect = () => {\n        // alert('externalThis.connection to the server is closed.');\n        if (this.connection.getAllParticipants().length > 0) return;\n\n        this.setDefaults();\n      };\n\n      this.connection.onSocketError = () => {\n        alert('Unable to connect to the server. Please try again.');\n\n        setTimeout(() => {\n          this.setDefaults();\n        }, 1000);\n      };\n\n      // this.connection.onopen = (event) => {\n      //   //\n      // };\n\n      this.connection.onmessage = (event) => {\n        if (event.data.newChatMessage) {\n          // this.runtimePort.postMessage({\n          //   messageFromContentScript1234: true,\n          //   newChatMessage: event.data.newChatMessage\n          // });\n\n          this.connection.send({\n            receivedChatMessage: true,\n            checkmark_id: event.data.checkmark_id,\n          });\n        }\n\n        // if (event.data.receivedChatMessage) {\n        //   this.runtimePort.postMessage({\n        //     messageFromContentScript1234: true,\n        //     receivedChatMessage: true,\n        //     checkmark_id: event.data.checkmark_id\n        //   });\n        // }\n      };\n\n      this.connection.open(this.connection.sessionid, roomOpenCallback);\n\n      var oldLength = 0;\n      this.connection.onleave = (event) => {\n        const participants = this.connection.getAllParticipants();\n        let count = participants.length;\n        if (participants.includes(event.userid)) {\n          count--;\n        }\n        this.setViewerCount(count);\n      };\n\n      this.connection.onPeerStateChanged = () => {\n        const participantsCount = this.connection.getAllParticipants().length;\n        if (oldLength != participantsCount) {\n          // sendTabTitle();\n        }\n        this.setViewerCount(\n          this.connection.isInitiator ? participantsCount : 0,\n        );\n      };\n    },\n    setViewerCount(count) {\n      this.$emit('viewer-count', count);\n      if (this.connection) {\n        this.connection.extra.receiverViewerCount = count;\n        this.connection.updateExtraData();\n      }\n    },\n    setOffline() {\n      if (!this.connection || !this.connection.attachStreams.length) return;\n      this.setDefaults();\n    },\n    setOnline() {\n      if (!this.connection) return;\n      this.setDefaults();\n    },\n    setDefaults() {\n      if (this.connection) {\n        this.connection.attachStreams.forEach((stream) => {\n          try {\n            stream.getTracks().forEach((track) => {\n              try {\n                track.stop();\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          } catch (e) {\n            console.error(e);\n          }\n        });\n\n        try {\n          this.connection.closeSocket();\n        } catch (e) {\n          console.error(e);\n        }\n        this.connection = null;\n      }\n\n      this.setViewerCount(0);\n    },\n  },\n};\n\nfunction setBandwidth(sdp, value) {\n  sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n  sdp = sdp.replace(\n    /a=mid:video\\r\\n/g,\n    'a=mid:video\\r\\nb=AS:' + value + '\\r\\n',\n  );\n  return sdp;\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamerConnection.vue?vue&type=template&id=76d811fc&lang=pug&\"\nimport script from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style scoped lang=\"sass\">\n.logo\n  display: block\n  margin: 0 auto\n  width: 228px\n  height: auto\n  fill: $primary-color\n\n  // XS\n  @media (max-width: 767px)\n    width: 114px\n\n.live-indicator\n  margin: 15px auto 0\n  width: 228px\n  color: $tertiary-color\n  border-radius: 20px\n  border: 6px solid $tertiary-color\n  font-weight: $weight-bold\n  font-size: 91px\n  text-align: center\n\n  // XS\n  @media (max-width: 767px)\n    width: 114px\n    border-radius: 10px\n    border: 3px solid $tertiary-color\n    font-size: 45px\n    margin-bottom: 30px\n\n  &.live\n    color: red\n    border-color: red\n    animation: pulse 1.5s ease-in-out infinite alternate\n\n.id-taken\n  color: #721c24\n  background-color: #f8d7da\n  border: 1px solid #f5c6cb\n  padding: 0.6em\n  margin-top: 0.5em\n  border-radius: $border-radius-small\n\n.room-id-label\n  font-size: 40px\n  color: $primary-color\n\n  // XS\n  @media (max-width: 767px)\n    font-size: 30px\n\n  input\n    font-size: 40px\n    border-width: 4px\n    overflow-x: hidden\n\n    // XS\n    @media (max-width: 767px)\n      font-size: 30px\n      border-width: 2px\n\nsection\n  border: 2px solid $tertiary-color\n  border-radius: 10px\n  padding: 40px\n  margin: 40px 0\n  position: relative\n\n  .section-label\n    position: absolute\n    top: -12px\n    left: 30px\n    background-color: $white\n    border-radius: $border-radius-small\n    padding: 2px 10px\n    width: auto\n    z-index: $z-page\n\n    &.right-item\n      left: auto\n      right: 30px\n      cursor: pointer\n      user-select: none\n      fill: $primary-color\n      padding: 3px 10px 0\n\n      .gear\n        svg\n          height: 16px\n          width: auto\n          margin-right: 1px\n\n        sup\n          display: block\n          margin-top: 8px\n\n      .x-icon\n        height: 15px\n        padding: 0 4px\n\n        svg\n          height: 8px\n          width: auto\n\n  .advanced\n    overflow: hidden\n    position: absolute\n    top: 0\n    right: 0\n    bottom: 0\n    left: 0\n\n    & > .frow\n      animation: slide-down $animate-speed ease\n      background-color: $tertiary-color\n\n.settings-item\n  margin-bottom: 40px\n\n  label\n    margin-bottom: 0\n\n.stream-button\n  cursor: pointer\n  transition: color $animate-speed\n\n  &:hover\n    color: $black\n\n  svg\n    width: 40px\n    height: auto\n    margin-bottom: 10px\n\n    path\n      fill: $primary-color\n      transition: fill $animate-speed\n\n  &:hover svg path\n    fill: $black\n\n.and-mic\n  opacity: 0\n  transition: opacity $animate-speed\n</style>\n\n<template lang=\"pug\">\ndiv\n  DesktopCapturer(\n    ref=\"capturer\"\n    :enableVideo=\"enableVideo\"\n    :enableAudio=\"enableAudio\"\n    :enableMic=\"enableMic\"\n    :resolution=\"resolution\"\n    @is-sharing=\"onIsSharing\"\n    @got-stream=\"onGotStream\"\n    @set-defaults=\"onSetDefaults\"\n  )\n  StreamerConnection(\n    ref=\"connection\"\n    :bandwidth=\"bandwidth\"\n    :codecs=\"codecs\"\n    :roomId=\"room_id\"\n    :roomPassword=\"room_password\"\n    :privacy=\"privacy\"\n    :enableVideo=\"enableVideo\"\n    :enableAudio=\"enableAudio\"\n    :isP2POnly=\"isP2POnly\"\n    @session-id=\"onSessionId\"\n    @viewer-count=\"onViewerCount\"\n    @id-taken=\"onIdTaken\"\n  )\n  .frow.row-center.width-100\n    .col-md-1-2\n      router-link.logo(to=\"/\")\n        LogoSvg\n      .live-indicator(:class=\"{ live: isSharingOn && sessionId }\") LIVE\n    .col-md-1-2\n      div(v-if=\"!isSharingOn || !sessionId\")\n        .id-taken.text-center(v-if=\"room_id && room_id === useridAlreadyTaken\")\n          | Room name already taken: #[strong {{useridAlreadyTaken}}]\n        label.room-id-label.row-start\n          span.shrink-0\n            | 2n.fm/\n          input(\n            type=\"text\"\n            placeholder=\"Random\"\n            v-model=\"room_id\"\n            @change=\"setRoomName\"\n            @blur=\"setRoomName\")\n        section.options\n          .section-label Options\n          .section-label.right-item(@click=\"showAdvancedOptions = !showAdvancedOptions\")\n            .gear(v-if=\"!showAdvancedOptions\")\n              .frow.nowrap\n                GearSvg\n                sup !\n            .x-icon(v-if=\"showAdvancedOptions\")\n              .frow.centered\n                XSvg\n          .advanced(v-show=\"showAdvancedOptions\")\n            .frow.centered\n              label.row-center.mb-0\n                input(type=\"checkbox\" v-model=\"isP2POnly\")\n                | Force peer-to-peer (P2P) connections\n          .frow.gutters\n            .col-xs-1-2\n              .settings-item\n                label\n                  | Resolution\n                  select#resolutions(v-model=\"resolution\")\n                    option(:value=\"Resolutions.FitScreen\") Fit Screen\n                    option(:value=\"Resolutions.Fit4K\") 4K (2160p)\n                    option(:value=\"Resolutions.Fit2K\") 2K (1440p)\n                    option(:value=\"Resolutions.Fit1080p\") Full-HD (1080p)\n                    option(:value=\"Resolutions.Fit720p\") HD (720p)\n                    option(:value=\"Resolutions.Fit480p\") SD (480p)\n                    option(:value=\"Resolutions.Fit360p\") LD (360p)\n                    option(:value=\"Resolutions.Fit240p\") N64 (240p)\n                    option(:value=\"Resolutions.Fit144p\") 2LO (144p)\n            .col-xs-1-2\n              label.row-start\n                input(type=\"radio\" value=\"private\" v-model=\"privacy\")\n                | Private Room\n              label.row-start.mb-0\n                input(type=\"radio\" value=\"public\" v-model=\"privacy\")\n                | Public Room\n            .col-xs-1-2\n              label.row-start\n                input(type=\"checkbox\" v-model=\"enableMic\")\n                | Enable Microphone\n            .col-xs-1-2\n              label.row-start.mb-10\n                | Codec\n                select.ml-5(v-model=\"codecs\")\n                  option(:value=\"Codecs.vp9\") VP9 (Quality)\n                  option(:value=\"Codecs.vp8\") VP8 (Performance)\n                  option(:value=\"Codecs.h264\" :disabled=\"!isP2POnly\") H.264 (P2P Only)\n              .label.text-center.m-0\n                span(v-if=\"codecs === Codecs.vp9\")\n                  | Best quality, least data\n                span(v-if=\"codecs === Codecs.vp8\")\n                  | Good quality, more FPS\n                span(v-if=\"codecs === Codecs.h264\")\n                  | Easy on old devices, bandwidth heavy\n            //- .col-xs-1-2\n            //-   .settings-item.mb-0\n            //-     label\n            //-       | Bandwidth\n            //-       input#bandwidth(\n            //-         type=\"text\"\n            //-         value=\"\"\n            //-         placeholder=\"Optional: 8192, 1048, 512, etc.\"\n            //-         @change=\"setBandwidth\"\n            //-       )\n            //- .col-xs-1-2\n            //-   .settings-item.mb-0\n            //-     label\n            //-       | Room Password\n            //-       input#room_password(type=\"password\" value=\"\" placeholder=\"Optional\")\n        section\n          .section-label Start\n          .frow.gutters\n            .col-xs-1-3\n              .stream-button(@click=\"startStream(true, false)\")\n                .frow.column-center\n                  VideoSvg\n                  | Video Only\n                  .and-mic(:class=\"{'opacity-100': enableMic }\")\n                    | & Mic\n            .col-xs-1-3\n              .stream-button(@click=\"startStream(true, true)\")\n                .frow.column-center\n                  VideoAndAudioSvg\n                  | Video + Audio\n                  .and-mic(:class=\"{'opacity-100': enableMic }\")\n                    | & Mic\n            .col-xs-1-3\n              .stream-button(@click=\"startStream(false, true)\")\n                .frow.column-center\n                  AudioSvg\n                  | Audio Only\n                  .and-mic(:class=\"{'opacity-100': enableMic }\")\n                    | & Mic\n      StopSection(\n        v-if=\"isSharingOn && sessionId\"\n        :sessionId=\"sessionId\"\n        :viewerCount=\"viewerCount\"\n        :stream=\"stream\"\n        :privacy=\"privacy\"\n        @mute-mic-toggle=\"muteMic\"\n        @stop-stream=\"stopStream\"\n      )\n</template>\n\n<script>\nimport { Resolutions } from '@/utils/enums/Resolutions';\nimport { Codecs } from '@/utils/enums/Codecs';\n\nimport LogoSvg from '@/assets/svgs/logo.svg';\nimport VideoSvg from '@/assets/svgs/video.svg';\nimport AudioSvg from '@/assets/svgs/audio.svg';\nimport VideoAndAudioSvg from '@/assets/svgs/video-and-audio.svg';\nimport XSvg from '@/assets/svgs/x.svg';\nimport GearSvg from '@/assets/svgs/gear.svg';\n\nimport StopSection from '@/components/Streamer/StopSection.vue';\nimport DesktopCapturer from '@/components/DesktopCapturer.vue';\nimport StreamerConnection from '@/components/StreamerConnection.vue';\n\nexport default {\n  name: 'Streamer',\n  metaInfo() {\n    return {\n      title: (\n        `2N.fm ${this.isSharingOn && this.sessionId ?\n          `(${this.viewerCount}) · ${this.room_id}` : ''}`\n      ),\n    };\n  },\n  components: {\n    LogoSvg,\n    VideoSvg,\n    AudioSvg,\n    VideoAndAudioSvg,\n    XSvg,\n    GearSvg,\n    StopSection,\n    DesktopCapturer,\n    StreamerConnection,\n  },\n  data() {\n    return {\n      isSharingOn: false,\n      // sessionId aka room name\n      sessionId: null,\n      stream: null,\n      desktop_id: null,\n      constraints: null,\n      room_password: '',\n      room_id: window.localStorage.getItem('room_id') || '',\n      resolution: Resolutions.FitScreen,\n      codecs: Codecs.vp8,\n      bandwidth: null,\n      enableVideo: false,\n      enableAudio: false,\n      streaming_method: 'RTCMultiConnection',\n      viewerCount: 0,\n      privacy: 'private',\n      useridAlreadyTaken: '',\n      enableMic: false,\n      showAdvancedOptions: false,\n      isP2POnly: false,\n    };\n  },\n  computed: {\n    Resolutions() { return Resolutions; },\n    Codecs() { return Codecs; },\n  },\n  watch: {\n    isP2POnly(isP2POnly) {\n      if (!isP2POnly && this.codecs == Codecs.h264) {\n        // TODO: we may want to alert the user of this change somehow\n        this.codecs = Codecs.vp8;\n      }\n    },\n  },\n  mounted() {\n    // document.getElementById('enable-chat').onclick = function() {\n    //   var popup_width = 312;\n    //   var popup_height = 400;\n    //   runtimePort.postMessage({\n    //     messageFromContentScript1234: true,\n    //     openChat: true\n    //   });\n    //   window.open('chat.html','Chat','width='+popup_width+',height='+popup_height\n    //     +',toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,top='\n    //     +(screen.height - popup_height)+',left=' + (screen.width - popup_width - 30));\n    //   window.close();\n    // };\n  },\n  methods: {\n    startStream(enableVideo, enableAudio) {\n      this.enableVideo = enableVideo;\n      this.enableAudio = enableAudio;\n\n      if (this.$refs.connection.connection && this.$refs.connection.connection.attachStreams[0]) {\n        this.onSetDefaults();\n        return;\n      }\n\n      this.room_id = '';\n\n      if (window.localStorage.getItem('room_id')) {\n        this.room_id = window.localStorage.getItem('room_id');\n      }\n\n      let protectedRoutes = [ 'streamer' ];\n      if (protectedRoutes.includes(this.room_id)) {\n        this.useridAlreadyTaken = this.room_id;\n        return;\n      }\n      this.$nextTick(() => {\n        this.$refs.capturer.startStream();\n      });\n    },\n    stopStream() {\n      this.$refs.capturer.stopStream();\n      this.stream = null;\n    },\n    setRoomName() {\n      this.room_id = this.room_id\n        .trim()\n        .replace(/\\s+/g, '-')\n        .replace(/[^a-zA-Z0-9-_]/g, '')\n        .toLowerCase();\n      window.localStorage.setItem('room_id', this.room_id);\n    },\n    setBandwidth(value) {\n      try {\n        this.bandwidth = parseInt(value);\n      } catch (e) {\n        this.bandwidth = null;\n      }\n    },\n    onGotStream(stream) {\n      this.stream = stream;\n      this.stream.enableVideo = this.enableVideo;\n      this.stream.enableAudio = this.enableAudio;\n      this.$refs.connection.shareStreamUsingRTCMultiConnection(this.stream);\n    },\n    onSessionId(id) {\n      this.useridAlreadyTaken = '';\n      this.sessionId = id;\n    },\n    onSetDefaults() {\n      this.$refs.connection.setDefaults();\n    },\n    onIdTaken(takenID) {\n      this.useridAlreadyTaken = takenID;\n      this.stopStream();\n    },\n    onIsSharing(isSharing) {\n      this.isSharingOn = isSharing;\n      if (!this.isSharingOn) {\n        this.sessionId = null;\n      }\n    },\n    onViewerCount(count) {\n      this.viewerCount = count;\n    },\n    muteMic(value) {\n      this.stream.getAudioTracks().slice(-1)[0].enabled = !value;\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Streamer.vue?vue&type=template&id=01b5af53&scoped=true&lang=pug&\"\nimport script from \"./Streamer.vue?vue&type=script&lang=js&\"\nexport * from \"./Streamer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Streamer.vue?vue&type=style&index=0&id=01b5af53&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01b5af53\",\n  null\n  \n)\n\nexport default component.exports","\n      module.exports = {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"d\":\"M24 13.616v-3.232l-2.869-1.02a9.445 9.445 0 00-.811-1.955l1.308-2.751-2.285-2.285-2.751 1.307a9.468 9.468 0 00-1.955-.811L13.616 0h-3.232L9.363 2.869a9.413 9.413 0 00-1.955.811L4.657 2.372 2.372 4.657 3.68 7.409a9.39 9.39 0 00-.811 1.955L0 10.384v3.232l2.869 1.02a9.39 9.39 0 00.811 1.955l-1.308 2.751 2.285 2.286 2.751-1.308a9.468 9.468 0 001.955.811L10.384 24h3.232l1.021-2.869a9.445 9.445 0 001.955-.811l2.751 1.308 2.285-2.286-1.308-2.751a9.445 9.445 0 00.811-1.955L24 13.616zM12 16a4 4 0 110-8 4 4 0 010 8z\"}})])\n          )\n        }\n      }\n    ","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=style&index=0&id=01b5af53&scoped=true&lang=sass&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=style&index=0&id=4f7b0df0&scoped=true&lang=sass&\"","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n"],"sourceRoot":""}